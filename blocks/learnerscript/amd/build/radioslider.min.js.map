{"version":3,"file":"radioslider.min.js","sources":["../src/radioslider.js"],"sourcesContent":["/**\r\n * radiosToSlider v0.3.2\r\n * jquery plugin to create a slider using a list of radio buttons\r\n * (c)2014 Rub√©n Torres - rubentdlh@gmail.com\r\n * Released under the MIT license\r\n */\r\ndefine(['jquery','block_learnerscript/report'], function($,report) {\r\n    var defaults = {\r\n                    size: 'medium',\r\n                    animation: true,\r\n                    fitContainer: true,\r\n                    isDisable: false,\r\n                    onSelect: null,\r\n                    reportdashboard: true\r\n                    };\r\n    return RadiosToSlider = {\r\n        init: function(element, options) {\r\n            this.KNOB_WIDTH = 10;\r\n            this.KNOB_MARGIN = 42;\r\n            this.LEVEL_MARGIN = this.KNOB_MARGIN + 10;\r\n            this.LABEL_WIDTH = 34;\r\n            this.LEVEL_WIDTH = 10;\r\n            this.bearer = element;\r\n            this.options = options;\r\n            this.currentLevel = 0; //this means no level selected\r\n            this.value = null;\r\n                var rtn = [],\r\n                    $this = element;\r\n\r\n                $this.each(function() {\r\n                    options = $.extend({}, this.defaults, options);\r\n                    RadiosToSlider.activate();\r\n\r\n                    rtn.push({\r\n                        bearer: this.bearer,\r\n                        setDisable: RadiosToSlider.setDisable.bind(RadiosToSlider),\r\n                        setEnable: RadiosToSlider.setEnable.bind(RadiosToSlider),\r\n                        getValue: RadiosToSlider.getValue.bind(RadiosToSlider)\r\n                    });\r\n                });\r\n        },\r\n        activate: function() {\r\n            // Get number options\r\n            this.numOptions = this.bearer.find('input[type=radio]').length;\r\n            this.reset(); // helps prevent duplication\r\n            this.fitContainer();\r\n            this.addBaseStyle();\r\n            this.addLevels();\r\n            this.addBar();\r\n            this.setSlider();\r\n            this.addInteraction();\r\n            this.setDisabled();\r\n\r\n            var slider = this;\r\n\r\n            $(window).on('resize orientationChanged', function() {\r\n                slider.reset();\r\n                slider.fitContainer();\r\n                slider.addBaseStyle();\r\n                slider.addLevels();\r\n                slider.setSlider();\r\n                slider.addInteraction();\r\n                slider.setDisabled();\r\n            });\r\n        },\r\n\r\n        reset: function() {\r\n            var $labels = this.bearer.find('label'),\r\n                $levels = this.bearer.find('.slider-level');\r\n\r\n            $labels.each(function() {\r\n                var $this = $(this);\r\n\r\n                $this.removeClass('slider-label');\r\n                $this.css('left', 0);\r\n            });\r\n\r\n            $levels.each(function() {\r\n                $(this).remove();\r\n            });\r\n\r\n            this.bearer.css('width', 'auto');\r\n        },\r\n\r\n        fitContainer: function() {\r\n            // If fitContainer, calculate KNOB_MARGIN based on container width\r\n            if (this.options.fitContainer) {\r\n                this.KNOB_MARGIN = (this.bearer.width() - this.KNOB_WIDTH) / (this.numOptions - 1) - this.KNOB_WIDTH;\r\n                this.LEVEL_MARGIN = this.KNOB_MARGIN + 10;\r\n            }\r\n        },\r\n\r\n        addBaseStyle: function() {\r\n            var label = 0,\r\n                slider = this,\r\n                width = (this.numOptions * this.LEVEL_WIDTH) + (this.numOptions - 1) * this.LEVEL_MARGIN;\r\n            this.bearer.find('input[type=radio]').hide();\r\n            this.bearer.addClass(\"radios-to-slider \" + this.options.size);\r\n            this.bearer.css('width', width + 'px');\r\n            this.bearer.find('label').each(function() {\r\n                var $this = $(this),\r\n                    leftPos = slider.KNOB_WIDTH / 2 - (slider.LABEL_WIDTH / 2) + label * slider.LEVEL_MARGIN + label * slider.LEVEL_WIDTH;\r\n                $this.addClass('slider-label');\r\n                $this.css('left', leftPos + 'px');\r\n                label++;\r\n            });\r\n        },\r\n\r\n        //Add level indicators to DOM\r\n        addLevels: function() {\r\n            var $bearer = this.bearer,\r\n                level = 0,\r\n                slider = this;\r\n\r\n            $bearer.find('input[type=radio]').each(function() {\r\n                var $this = $(this);\r\n\r\n                $bearer.append(\"<ins class='slider-level' data-radio='\" + $this.attr('id') + \"' data-value=\" + $this.val() + \"></ins>\");\r\n            });\r\n\r\n            $bearer.find('.slider-level').each(function() {\r\n                var $this = $(this),\r\n                    paddingLeft = $bearer.css('padding-left').replace('px', '') - 0,\r\n                    width = paddingLeft + (level * slider.LEVEL_MARGIN) + (level * slider.LEVEL_WIDTH);\r\n\r\n                $this.css('left', width + 'px');\r\n\r\n                level++;\r\n            });\r\n\r\n        },\r\n\r\n        //Add slider bar to DOM\r\n        addBar: function() {\r\n            this.bearer.append(\"<ins class='slider-bar'><span class='slider-knob'></span></ins>\");\r\n        },\r\n\r\n        //set width of slider bar and current level\r\n        setSlider: function() {\r\n            var $inputs = this.bearer.find('input[type=radio]'),\r\n                $levels = this.bearer.find('.slider-level'),\r\n                $labels = this.bearer.find('.slider-label'),\r\n                radio = 1,\r\n                slider = this,\r\n                label;\r\n\r\n            $inputs.each(function() {\r\n                var $this = $(this),\r\n                    $sliderbar = slider.bearer.find('.slider-bar'),\r\n                    radioId = $this.attr('id');\r\n\r\n                if ($this.prop('checked')) {\r\n                    var width = (radio * slider.KNOB_WIDTH) + (radio - 1) * slider.KNOB_MARGIN + 10 * (radio-1);\r\n\r\n                    $sliderbar.css('display', 'block');\r\n                    $sliderbar.width(width + 'px');\r\n\r\n                    slider.currentLevel = radio;\r\n                }\r\n\r\n                if (slider.options.animation) {\r\n                    $sliderbar.addClass('transition-enabled');\r\n                }\r\n\r\n                radio++;\r\n            });\r\n\r\n            //Set style for lower levels\r\n            label = 0;\r\n            $levels.each(function() {\r\n                label++;\r\n\r\n                var $this = $(this);\r\n\r\n                if (label < slider.currentLevel) {\r\n                    $this.show();\r\n                    $this.addClass('slider-lower-level');\r\n                } else if (label == slider.currentLevel) {\r\n                    $this.hide();\r\n                } else {\r\n                    $this.show();\r\n                    $this.removeClass('slider-lower-level');\r\n                }\r\n            });\r\n\r\n            //Add bold style for selected label\r\n            label = 0;\r\n            $labels.each(function() {\r\n                label++;\r\n\r\n                var $this = $(this);\r\n\r\n                if (label == slider.currentLevel) {\r\n                    $this.addClass('slider-label-active');\r\n                } else {\r\n                    $this.removeClass('slider-label-active');\r\n                }\r\n            });\r\n        },\r\n\r\n        addInteraction: function() {\r\n            var slider = this,\r\n                $bearer = slider.bearer,\r\n                $levels = $bearer.find('.slider-level:not(.disabled)'),\r\n                $inputs = $bearer.find('input[type=radio]:not(:disabled)');\r\n\r\n            $levels.on('click', function(e) {\r\n                e.stopImmediatePropagation();\r\n                var $this = $(this),\r\n                    val = $this.attr('data-value'),\r\n                    radioId = $this.attr('data-radio'),\r\n                    radioElement = $bearer.find('#' + radioId);\r\n                require(['block_learnerscript/smartfilter'], function(smartfilter) {\r\n                        smartfilter.DurationFilter(val, slider.options.reportdashboard);\r\n                    });\r\n                radioElement.prop('checked', true);\r\n\r\n                if (slider.options.onSelect) {\r\n                    slider.options.onSelect(radioElement, [\r\n                        $levels,\r\n                        $inputs\r\n                    ]);\r\n                }\r\n                slider.value = val;\r\n                $bearer.attr('data-value', val);\r\n\r\n                slider.setSlider();\r\n\r\n                $bearer.trigger('radiochange');\r\n            });\r\n\r\n            $inputs.on('change', function(e) {\r\n                e.stopImmediatePropagation();\r\n                var $this = $(this),\r\n                    val = $this.attr('value'),\r\n                    radioId = $this.attr('data-radio'),\r\n                    radioElement = $bearer.find('#' + radioId);\r\n                require(['block_learnerscript/smartfilter'], function(smartfilter) {\r\n                        smartfilter.DurationFilter(val, slider.options.reportdashboard);\r\n                    });\r\n\r\n                radioElement.prop('checked', true);\r\n\r\n                if (slider.options.onChange) {\r\n                    slider.options.onChange(radioElement, [\r\n                        $levels,\r\n                        $inputs\r\n                    ]);\r\n                }\r\n\r\n                slider.value = val;\r\n                $bearer.attr('data-value', val);\r\n\r\n                slider.setSlider();\r\n                $bearer.trigger('radiochange');\r\n            });\r\n\r\n        },\r\n\r\n        setDisabled: function(isDisable, cb) {\r\n            if (!this.options.isDisable) return;\r\n\r\n            this.setDisable();\r\n        },\r\n\r\n        setDisable: function(cb) {\r\n            this.options.isDisable = true;\r\n\r\n            var slider = this,\r\n                $bearer = slider.bearer,\r\n                $levels = this.bearer.find('.slider-level'),\r\n                $inputs = this.bearer.find('input[type=radio]');\r\n\r\n            $.merge($levels, $inputs).each(function() {\r\n                var $this = $(this);\r\n\r\n                $this.prop('disabled', true).addClass('disabled');\r\n                $this.off('click change');\r\n            });\r\n\r\n            if (typeof cb === \"function\") {\r\n                cb($levels, $inputs);\r\n            }\r\n\r\n            $bearer.trigger('radiodisabled');\r\n        },\r\n\r\n        setEnable: function(cb) {\r\n            this.options.isDisable = false;\r\n\r\n            var slider = this,\r\n                $bearer = slider.bearer,\r\n                $levels = this.bearer.find('.slider-level'),\r\n                $inputs = this.bearer.find('input[type=radio]');\r\n\r\n            $.merge($levels, $inputs).each(function() {\r\n                $(this).prop('disabled', false).removeClass('disabled');\r\n                slider.addInteraction();\r\n            });\r\n\r\n            if (typeof cb === \"function\") {\r\n                cb($levels, $inputs);\r\n            }\r\n\r\n            $bearer.trigger('radiodenabled');\r\n        },\r\n\r\n        getValue: function() {\r\n            return this.value;\r\n        }\r\n\r\n    };\r\n});"],"names":["define","$","report","RadiosToSlider","init","element","options","KNOB_WIDTH","KNOB_MARGIN","LEVEL_MARGIN","this","LABEL_WIDTH","LEVEL_WIDTH","bearer","currentLevel","value","rtn","each","extend","defaults","activate","push","setDisable","bind","setEnable","getValue","numOptions","find","length","reset","fitContainer","addBaseStyle","addLevels","addBar","setSlider","addInteraction","setDisabled","slider","window","on","$labels","$levels","$this","removeClass","css","remove","width","label","hide","addClass","size","leftPos","$bearer","level","append","attr","val","replace","$inputs","radio","$sliderbar","prop","animation","show","e","stopImmediatePropagation","radioId","radioElement","require","smartfilter","DurationFilter","reportdashboard","onSelect","trigger","onChange","isDisable","cb","merge","off"],"mappings":"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"}