define("local_questions/questionBank",["exports","core_form/modalform","core/modal_factory","core/modal_events","core/ajax","core/str","jquery","core/templates","core/config"],(function(_exports,_modalform,_modal_factory,_modal_events,_ajax,_str,_jquery,_templates,_config){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modalform=_interopRequireDefault(_modalform),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_ajax=_interopRequireDefault(_ajax),_jquery=_interopRequireDefault(_jquery),_templates=_interopRequireDefault(_templates),_config=_interopRequireDefault(_config);const Selectors_actions={changestatus:'[data-action="changestatus"]'};_exports.init=caneditordeleteatanystatus=>{document.addEventListener("click",(function(e){let changestatus=e.target.closest(Selectors_actions.changestatus);if(changestatus){e.preventDefault();const questionid=changestatus.getAttribute("data-id"),status=changestatus.getAttribute("data-value"),statusText=changestatus.getAttribute("data-statusText"),adminstatus=changestatus.getAttribute("data-adminstatus"),canreviewselfstatus=changestatus.getAttribute("data-canreviewselfstatus"),workshopid=(changestatus.getAttribute("data-hidestatus"),changestatus.getAttribute("data-wid"));var params={};switch(params.questionid=questionid,params.workshopid=workshopid,params.status=status,status){case"readytoreview":displaystatus="Ready to Review";break;case"underreview":displaystatus="Under Review";break;case"draft":displaystatus="Draft";break;case"reject":displaystatus="Reject";break;case"publish":displaystatus="Publish"}_modal_factory.default.create({title:(0,_str.get_string)("statusconfirm","local_questions"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("confirmationbodymessage","local_questions",displaystatus)}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("statusupdate","local_questions")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault(),_ajax.default.call([{methodname:"local_questions_changequestionstatus",args:params}])[0].done((function(resp){(0,_jquery.default)(".questioncreation_page #status_span"+questionid).text(statusText),"publish"==status&&1!=adminstatus&&((0,_jquery.default)("#understatus"+questionid).hide(),(0,_jquery.default)("#rejectstatus"+questionid).hide(),(0,_jquery.default)("#publishstatus"+questionid).hide(),(0,_jquery.default)("#raedystatus"+questionid).hide()),"readytoreview"==status&&1!=adminstatus&&((0,_jquery.default)("#raedystatus"+questionid).hide(),(0,_jquery.default)("#hideeditdelete"+questionid).hide(),(0,_jquery.default)("#understatus"+questionid).hide()),"readytoreview"==status&&1==adminstatus&&((0,_jquery.default)("#raedystatus"+questionid).hide(),(0,_jquery.default)("#understatus"+questionid).show(),(0,_jquery.default)("#hideeditdelete"+questionid).show()),"reject"==status&&1!=adminstatus&&((0,_jquery.default)("#understatus"+questionid).hide(),(0,_jquery.default)("#rejectstatus"+questionid).hide(),(0,_jquery.default)("#publishstatus"+questionid).hide(),(0,_jquery.default)("#draft"+questionid).show()),"underreview"==status&&1!=adminstatus&&((0,_jquery.default)("#understatus"+questionid).hide(),(0,_jquery.default)("#rejectstatus"+questionid).show(),(0,_jquery.default)("#publishstatus"+questionid).show()),"readytoreview"==status&&1==adminstatus&&1==canreviewselfstatus&&((0,_jquery.default)("#understatus"+questionid).show(),(0,_jquery.default)("#raedystatus"+questionid).hide(),(0,_jquery.default)("#hideeditdelete"+questionid).show(),(0,_jquery.default)("#draft"+questionid).hide()),"readytoreview"==status&&1==adminstatus&&1!=canreviewselfstatus&&((0,_jquery.default)("#understatus"+questionid).show(),(0,_jquery.default)("#raedystatus"+questionid).hide(),(0,_jquery.default)("#hideeditdelete"+questionid).show(),(0,_jquery.default)("#draft"+questionid).hide()),"underreview"==status&&1==adminstatus&&((0,_jquery.default)("#understatus"+questionid).hide(),(0,_jquery.default)("#rejectstatus"+questionid).show(),(0,_jquery.default)("#publishstatus"+questionid).show()),"publish"==status&&1==adminstatus&&((0,_jquery.default)("#understatus"+questionid).hide(),(0,_jquery.default)("#rejectstatus"+questionid).hide(),(0,_jquery.default)("#publishstatus"+questionid).hide(),(0,_jquery.default)("#raedystatus"+questionid).hide(),(0,_jquery.default)("#draftstatus"+questionid).show()),"reject"==status&&1==adminstatus&&((0,_jquery.default)("#understatus"+questionid).hide(),(0,_jquery.default)("#rejectstatus"+questionid).hide(),(0,_jquery.default)("#publishstatus"+questionid).hide(),(0,_jquery.default)("#raedystatus"+questionid).hide(),(0,_jquery.default)("#draft"+questionid).show(),(0,_jquery.default)("#hideeditdelete"+questionid).show()),"draft"==status&&1==adminstatus&&((0,_jquery.default)("#hideeditdelete"+questionid).show(),(0,_jquery.default)("#raedystatus"+questionid).show(),(0,_jquery.default)("#draftstatus"+questionid).hide(),(0,_jquery.default)("#draft"+questionid).hide()),modal.hide()})).fail((function(){console.log("exception")}))}.bind(this)),modal.show()}.bind(this))}}))}}));

//# sourceMappingURL=questionBank.min.js.map