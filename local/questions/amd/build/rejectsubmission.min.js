define("local_questions/rejectsubmission",["exports","jquery","core_form/modalform","core/modal_factory","core/modal_events","core/ajax","core/str"],(function(_exports,_jquery,_modalform,_modal_factory,_modal_events,_ajax,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Functionality for questions
   *
   * @module     local_questions/questions
   * @package
   * @copyright  2023 Moodle India Information Solutions Pvt Ltd
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_modalform=_interopRequireDefault(_modalform),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_ajax=_interopRequireDefault(_ajax);const SELECTORS_REJECTSUBMISSION='[data-action="statustoreject"]';_exports.init=()=>{(0,_jquery.default)(SELECTORS_REJECTSUBMISSION).on("click",(function(e){e.preventDefault(),function(e){e.preventDefault();var id=(0,_jquery.default)(e.currentTarget).attr("data-id"),headstring=(0,_jquery.default)(e.currentTarget).attr("data-headstring"),qbankeid=(0,_jquery.default)(e.currentTarget).attr("data-qbankeid"),workshopid=(0,_jquery.default)(e.currentTarget).attr("data-wid"),modal=new _modalform.default({formClass:"local_questions\\form\\rejectreason_form",args:{id:id,qbankeid:qbankeid,workshopid:workshopid},modalConfig:{title:headstring},saveButtonText:(0,_str.get_string)("save"),returnFocus:(0,_jquery.default)(e.currentTarget)});modal.addEventListener(modal.events.FORM_SUBMITTED,(function(){var qid=(0,_jquery.default)(e.currentTarget).attr("data-id"),wid=(0,_jquery.default)(e.currentTarget).attr("data-wid"),status=(0,_jquery.default)(e.currentTarget).attr("data-value"),statusText=(0,_jquery.default)(e.currentTarget).attr("data-statusText"),adminstatus=(0,_jquery.default)(e.currentTarget).attr("data-adminstatus"),params={};params.questionid=qid,params.workshopid=wid,params.status=status,_ajax.default.call([{methodname:"local_questions_changequestionstatus",args:params}])[0].done((function(resp){(0,_jquery.default)(".questioncreation_page #status_span"+qid).text(statusText),"reject"==status&&1==adminstatus&&((0,_jquery.default)("#understatus"+qid).hide(),(0,_jquery.default)("#rejectstatus"+qid).hide(),(0,_jquery.default)("#publishstatus"+qid).hide(),(0,_jquery.default)("#raedystatus"+qid).hide(),(0,_jquery.default)("#draftstatus"+qid).show(),(0,_jquery.default)("#hideeditdelete"+qid).show()),"reject"==status&&1!=adminstatus&&((0,_jquery.default)("#understatus"+qid).hide(),(0,_jquery.default)("#rejectstatus"+qid).hide(),(0,_jquery.default)("#publishstatus"+qid).hide(),(0,_jquery.default)("#draftstatus"+qid).show()),console.log("Status changed successfully")})).fail((function(){console.log("Error processing the request")}))})),modal.show()}(e)}))}}));

//# sourceMappingURL=rejectsubmission.min.js.map