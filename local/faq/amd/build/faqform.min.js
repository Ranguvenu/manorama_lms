define("local_faq/faqform",["exports","core_form/modalform","core/modal_factory","core/modal_events","core/ajax","core/notification","core/templates","core/str","theme_horizon/homepage"],(function(_exports,_modalform,_modal_factory,_modal_events,_ajax,_notification,_templates,_str,_homepage){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * AMD module for the hirarchy in faqs page.
   *
   * @module     local_faq/faq_categories
   * @copyright  2023 Moodle India
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modalform=_interopRequireDefault(_modalform),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates),_homepage=_interopRequireDefault(_homepage);const Selectors_actions={cteatecategory:'[data-action = "cteatecategory"]',cteatequeries:'[data-action="cteatequeries"]',createclass:'[data-action="createclass"]',createsubject:'[data-action="createsubject"]',deletefaq:'[data-action="deletefaq"]',deletequery:'[data-action="deletequery"]'};new _homepage.default;_exports.init=()=>{document.addEventListener("click",(function(e){let cteatecategory=e.target.closest(Selectors_actions.cteatecategory);if(cteatecategory){e.preventDefault(),e.stopImmediatePropagation();const title=cteatecategory.getAttribute("data-id")?(0,_str.get_string)("edit_faqcategory","local_faq",cteatecategory.getAttribute("data-name")):(0,_str.get_string)("addcategory","local_faq"),form=new _modalform.default({formClass:"local_faq\\form\\faq_categories",args:{id:cteatecategory.getAttribute("data-id")},modalConfig:{title:title},returnFocus:cteatecategory});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}if(cteatequeries=e.target.closest(Selectors_actions.cteatequeries),cteatequeries){e.preventDefault(),e.stopImmediatePropagation();const title=cteatequeries.getAttribute("data-id")?(0,_str.get_string)("edit_faqquery","local_faq",cteatequeries.getAttribute("data-name")):(0,_str.get_string)("addquery","local_faq",cteatequeries.getAttribute("data-name")),form=new _modalform.default({formClass:"local_faq\\form\\faq_queries",args:{id:cteatequeries.getAttribute("data-id"),id:cteatequeries.getAttribute("data-id")},modalConfig:{title:title},returnFocus:cteatequeries});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}if(createclass=e.target.closest(Selectors_actions.createclass),createclass){e.preventDefault(),e.stopImmediatePropagation();const title=createclass.getAttribute("data-id")?(0,_str.get_string)("edit_class","local_faq",createclass.getAttribute("data-name")):(0,_str.get_string)("add_class","local_faq",createclass.getAttribute("data-boardname")),form=new _modalform.default({formClass:"local_faq\\form\\customclass",args:{id:createclass.getAttribute("data-id"),boardid:createclass.getAttribute("data-boardid")},modalConfig:{title:title},returnFocus:createclass});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}if(createsubject=e.target.closest(Selectors_actions.createsubject),createsubject){e.preventDefault(),e.stopImmediatePropagation();const title=createsubject.getAttribute("data-id")?(0,_str.get_string)("edit_subject","local_faq",createsubject.getAttribute("data-name")):(0,_str.get_string)("add_subject","local_faq",createsubject.getAttribute("data-classessname")),form=new _modalform.default({formClass:"local_faq\\form\\customsubject",args:{id:createsubject.getAttribute("data-id"),classessid:createsubject.getAttribute("data-classessid")},modalConfig:{title:title},returnFocus:createsubject});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}let deletefaq=e.target.closest(Selectors_actions.deletefaq);if(deletefaq){const id=deletefaq.getAttribute("data-id"),name=deletefaq.getAttribute("data-name");_modal_factory.default.create({title:(0,_str.get_string)("confirm","local_faq"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("deletefaqcategory","local_faq",name)}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("yes","local_faq")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={confirm:!0};params.id=id,_ajax.default.call([{methodname:"local_faq_delete_faqcategory",args:params}])[0].done((function(){window.location.reload(!0)})).fail((function(){}))}.bind(this)),modal.show()}.bind(this))}let deletequery=e.target.closest(Selectors_actions.deletequery);if(deletequery){const id=deletequery.getAttribute("data-id"),name=deletequery.getAttribute("data-name");_modal_factory.default.create({title:(0,_str.get_string)("confirm","local_faq"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("deletefaqquery","local_faq",name)}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("yes","local_faq")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={confirm:!0};params.id=id,_ajax.default.call([{methodname:"local_faq_delete_faq_query",args:params}])[0].done((function(){window.location.reload(!0)})).fail((function(){}))}.bind(this)),modal.show()}.bind(this))}}))}}));

//# sourceMappingURL=faqform.min.js.map