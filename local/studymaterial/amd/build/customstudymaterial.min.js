define("local_studymaterial/customstudymaterial",["exports","core_form/modalform","core/modal_factory","core/modal_events","core/ajax","core/notification","core/templates","core/str","theme_horizon/homepage"],(function(_exports,_modalform,_modal_factory,_modal_events,_ajax,_notification,_templates,_str,_homepage){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * AMD module for the hirarchy in studymaterial page.
   *
   * @module     local_studymaterial/customstudymaterial
   * @copyright  2023 Moodle India
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modalform=_interopRequireDefault(_modalform),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates),_homepage=_interopRequireDefault(_homepage);const Selectors_actions={createstudymaterial:'[data-action = "createstudymaterial"]',deletestudymaterial:'[data-action="deletestudymaterial"]'};new _homepage.default;_exports.init=()=>{document.addEventListener("click",(function(e){let createstudymaterial=e.target.closest(Selectors_actions.createstudymaterial);if(createstudymaterial){e.preventDefault(),e.stopImmediatePropagation();const title=createstudymaterial.getAttribute("data-id")?(0,_str.get_string)("edit_studymaterial","local_studymaterial",createstudymaterial.getAttribute("data-name")):(0,_str.get_string)("add_studymaterial","local_studymaterial"),form=new _modalform.default({formClass:"local_studymaterial\\form\\customstudymaterial",args:{id:createstudymaterial.getAttribute("data-id"),courseid:createstudymaterial.getAttribute("data-courseid")},modalConfig:{title:title},returnFocus:createstudymaterial});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.show()}if(deletestudymaterial=e.target.closest(Selectors_actions.deletestudymaterial),deletestudymaterial){const component=deletestudymaterial.getAttribute("data-component"),id=deletestudymaterial.getAttribute("data-id"),name=deletestudymaterial.getAttribute("data-name"),code=deletestudymaterial.getAttribute("data-code");var displayparams={};displayparams.component=component,displayparams.name=name,displayparams.code=code,_modal_factory.default.create({title:(0,_str.get_string)("deletestudymaterialconfirm","local_studymaterial",component),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("deletestudymaterialbodymessage","local_studymaterial",displayparams)}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("deletetext","local_studymaterial")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault();var params={};params.id=id,_ajax.default.call([{methodname:"local_studymaterial_deletestudymaterial",args:params}])[0].done((function(resp){window.location.reload(!0)})).fail((function(){console.log("exception")}))}.bind(this)),modal.show()}.bind(this))}}))}}));

//# sourceMappingURL=customstudymaterial.min.js.map