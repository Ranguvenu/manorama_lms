{"version":3,"file":"onlineexams.min.js","sources":["../src/onlineexams.js"],"sourcesContent":["define([\r\n    'local_onlineexams/jquery.dataTables',\r\n    'jquery','core/str','core/modal_factory', 'core/ajax'\r\n], function(DataTable, $,Str,ModalFactory, Ajax){\r\n    return courses = {\r\n        load : function() {\r\n        },\r\n        usersdatatable : function(args) {\r\n            params = [];\r\n            params.action = args.action;\r\n            params.courseid = args.courseid;\r\n\t\t\tStr.get_strings([{\r\n                key: 'search',\r\n                component: 'local_courses'\r\n            }, {\r\n                key: 'no_users_enrolled',\r\n                component: 'local_courses'\r\n            }]).then(function(s) {\r\n            var oTable = $('#course_users').dataTable({\r\n                'bInfo': false,\r\n                'processing': true,\r\n                'serverSide': true,\r\n                'ordering': false,\r\n                'ajax': {\r\n                    \"type\": \"POST\",\r\n                    \"url\": M.cfg.wwwroot + '/local/courses/ajax.php',\r\n                    \"data\": params\r\n                },\r\n                \"bLengthChange\": false,\r\n                \"language\": {\r\n                    \"paginate\": {\r\n                        \"next\": \">\",\r\n                        \"previous\": \"<\"\r\n                    },\r\n                    'processing': '<img src='+M.cfg.wwwroot + '/local/ajax-loader.svg>'\r\n                },\r\n                \"oLanguage\": {\r\n                  \"sSearch\" : s[0],\r\n\t\t\t\t  \"sZeroRecords\": s[1]\r\n                },\r\n            });\r\n\t\t\t });\r\n        },\r\n        deleteuser: function(element) {\r\n          var enrollmentid = element.userid;\r\n          // console.log(element);\r\n            return Str.get_strings([{\r\n                key: 'deleteuser',\r\n                component: 'local_courses'\r\n            }, {\r\n                key: 'confirmdelete',\r\n                component: 'local_courses'\r\n            }]).then(function(s) {\r\n                ModalFactory.create({\r\n                    title: s[0],\r\n                    type: ModalFactory.types.DEFAULT,\r\n                    body: s[1],\r\n                    footer: '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+M.util.get_string(\"yes\", \"moodle\")+'</button>&nbsp;' +\r\n            '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">'+M.util.get_string(\"no\", \"moodle\")+'</button>'\r\n                }).done(function(modal) {\r\n                    this.modal = modal;\r\n                     modal.getRoot().find('[data-action=\"save\"]').on('click', function() {\r\n                        window.location.href ='enrolledusers.php?id='+element.id+'&ue='+element.userid+'&confirm=1&sesskey=' + M.cfg.sesskey;\r\n                    }.bind(this));\r\n                    modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\r\n                        modal.setBody('');\r\n                        modal.hide();\r\n                    });\r\n                    modal.show();\r\n                }.bind(this));\r\n            }.bind(this));\r\n        },\r\n    };\r\n    \r\n});\r\n"],"names":["define","DataTable","$","Str","ModalFactory","Ajax","courses","load","usersdatatable","args","params","action","courseid","get_strings","key","component","then","s","dataTable","bInfo","processing","serverSide","ordering","ajax","type","url","M","cfg","wwwroot","data","bLengthChange","language","paginate","next","previous","oLanguage","sSearch","sZeroRecords","deleteuser","element","userid","create","title","types","DEFAULT","body","footer","util","get_string","done","modal","this","getRoot","find","on","window","location","href","id","sesskey","bind","getFooter","setBody","hide","show"],"mappings":"AAAAA,uCAAO,CACH,sCACA,SAAS,WAAW,qBAAsB,cAC3C,SAASC,UAAWC,EAAEC,IAAIC,aAAcC,MACvC,OAAOC,QAAU,CACbC,KAAO,aAEPC,eAAiB,SAASC,MACtBC,OAAS,GACTA,OAAOC,OAASF,KAAKE,OACrBD,OAAOE,SAAWH,KAAKG,SAChCT,IAAIU,YAAY,CAAC,CACJC,IAAK,SACLC,UAAW,iBACZ,CACCD,IAAK,oBACLC,UAAW,mBACXC,MAAK,SAASC,GACLf,EAAE,iBAAiBgB,UAAU,CACtCC,OAAS,EACTC,YAAc,EACdC,YAAc,EACdC,UAAY,EACZC,KAAQ,CACJC,KAAQ,OACRC,IAAOC,EAAEC,IAAIC,QAAU,0BACvBC,KAAQnB,QAEZoB,eAAiB,EACjBC,SAAY,CACRC,SAAY,CACRC,KAAQ,IACRC,SAAY,KAEhBd,WAAc,YAAYM,EAAEC,IAAIC,QAAU,2BAE9CO,UAAa,CACXC,QAAYnB,EAAE,GAC1BoB,aAAgBpB,EAAE,UAKhBqB,WAAY,SAASC,SACAA,QAAQC,OAEzB,OAAOrC,IAAIU,YAAY,CAAC,CACpBC,IAAK,aACLC,UAAW,iBACZ,CACCD,IAAK,gBACLC,UAAW,mBACXC,KAAK,SAASC,GACdb,aAAaqC,OAAO,CAChBC,MAAOzB,EAAE,GACTO,KAAMpB,aAAauC,MAAMC,QACzBC,KAAM5B,EAAE,GACR6B,OAAQ,oEAAoEpB,EAAEqB,KAAKC,WAAW,MAAO,UAA7F,uFACwDtB,EAAEqB,KAAKC,WAAW,KAAM,UAAU,cACnGC,KAAK,SAASC,OACbC,KAAKD,MAAQA,MACZA,MAAME,UAAUC,KAAK,wBAAwBC,GAAG,QAAS,WACtDC,OAAOC,SAASC,KAAM,wBAAwBlB,QAAQmB,GAAG,OAAOnB,QAAQC,OAAO,sBAAwBd,EAAEC,IAAIgC,SAC/GC,KAAKT,OACPD,MAAMW,YAAYR,KAAK,0BAA0BC,GAAG,SAAS,WACzDJ,MAAMY,QAAQ,IACdZ,MAAMa,UAEVb,MAAMc,QACRJ,KAAKT,QACTS,KAAKT,QAInB"}