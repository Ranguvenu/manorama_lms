{"version":3,"file":"regradequestions.min.js","sources":["../src/regradequestions.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Initialise the repaginate dialogue on quiz editing page.\r\n *\r\n * @module    mod_quiz/repaginate\r\n * @copyright 2019 The Open University\r\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\ndefine(['jquery', 'core/modal_factory', 'core/modal_events', 'core/ajax', 'core/templates'], function($, ModalFactory, ModalEvents, Ajax, Templates) {\r\n\r\n    var SELECTORS = {\r\n        REGRADEID: '#regradequestions_quiz',\r\n        HEADER: 'header',\r\n        BODY: 'body'\r\n    };\r\n\r\n    /**\r\n     * Initialise the repaginate button and add the event listener.\r\n     */\r\n    var init = function() {\r\n        $(document).on('click', SELECTORS.REGRADEID, function(){\r\n            ModalFactory.create(\r\n                {\r\n                    title: $(SELECTORS.REGRADEID).data(SELECTORS.HEADER),\r\n                    body: $(SELECTORS.REGRADEID).data(SELECTORS.BODY),\r\n                    type: ModalFactory.types.SAVE_CANCEL,\r\n                    large: false,\r\n                }\r\n            ).done(\r\n                function (modal) {\r\n                  self.modal = modal;\r\n                  modal.setSaveButtonText($(SELECTORS.REGRADEID).data(SELECTORS.HEADER));\r\n                  console.log('here');\r\n                  modal.getRoot().on(\r\n                    ModalEvents.save,\r\n                    function (e) {\r\n                        e.preventDefault();\r\n                        self.modal.setBody(Templates.render('core/loading', {}));\r\n                        var promise = Ajax.call([\r\n                            {\r\n                                methodname: \"local_questions_regrade_all_questions\",\r\n                                args: {quizid: $(SELECTORS.REGRADEID).data('quizid')},\r\n                            },\r\n                        ]);\r\n                        promise[0].done(function(resp){\r\n                            window.location.reload();\r\n                        });\r\n                    }.bind(this));\r\n                  modal.show();\r\n                }.bind(this)\r\n            );\r\n        });\r\n    };\r\n    return {\r\n        init: init\r\n    };\r\n});"],"names":["define","$","ModalFactory","ModalEvents","Ajax","Templates","SELECTORS","init","document","on","create","title","data","body","type","types","SAVE_CANCEL","large","done","modal","self","setSaveButtonText","console","log","getRoot","save","e","preventDefault","setBody","render","call","methodname","args","quizid","resp","window","location","reload","bind","this","show"],"mappings":";;;;;;;AAsBAA,wCAAO,CAAC,SAAU,qBAAsB,oBAAqB,YAAa,mBAAmB,SAASC,EAAGC,aAAcC,YAAaC,KAAMC,WAEtI,IAAIC,oBACW,yBADXA,iBAEQ,SAFRA,eAGM,OAwCV,MAAO,CACHC,KAnCO,WACPN,EAAEO,UAAUC,GAAG,QAASH,qBAAqB,WACzCJ,aAAaQ,OACT,CACIC,MAAOV,EAAEK,qBAAqBM,KAAKN,kBACnCO,KAAMZ,EAAEK,qBAAqBM,KAAKN,gBAClCQ,KAAMZ,aAAaa,MAAMC,YACzBC,OAAO,IAEbC,KACE,SAAUC,OACRC,KAAKD,MAAQA,MACbA,MAAME,kBAAkBpB,EAAEK,qBAAqBM,KAAKN,mBACpDgB,QAAQC,IAAI,QACZJ,MAAMK,UAAUf,GACdN,YAAYsB,KACZ,SAAUC,GACNA,EAAEC,iBACFP,KAAKD,MAAMS,QAAQvB,UAAUwB,OAAO,eAAgB,KACtCzB,KAAK0B,KAAK,CACpB,CACIC,WAAY,wCACZC,KAAM,CAACC,OAAQhC,EAAEK,qBAAqBM,KAAK,cAG3C,GAAGM,MAAK,SAASgB,MACrBC,OAAOC,SAASC,aAEtBC,KAAKC,OACTpB,MAAMqB,QACNF,KAAKC,WAOvB"}